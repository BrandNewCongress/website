// Use Require.js or Contextual Scope
!function(root,factory){"function"==typeof require?require(["stratus","jquery","underscore"],factory):factory(root.Stratus,root.$,root._)}(this,function(Stratus,$,_){Stratus.DOM.ready(function(){function trackEvent(el){var trackCategory=el.dataAttr("trackCategory")||"unknown",trackLabel=el.dataAttr("trackLabel")||null,trackValue=el.dataAttr("trackValue")||null;ga("send","event",trackCategory,trackLabel,trackValue)}function send($form){var btnSubmit=$form.find(".signupAction .btnText");btnSubmit.dataAttr("text")||btnSubmit.dataAttr("text",btnSubmit.text()),toggleSubmitButton(btnSubmit,"off");var payload=makePayload($form),meta={method:"new"};Stratus.Internals.Api("User",meta,payload).done(function(response){var success=!1,statusMessage=[];$.each(response.meta.status,function(i,el){"SUCCESS"===el.code&&(success=!0),statusMessage.push(el.message)}),success?($form.hide(),$.each($form.parent().find(".success_message"),function(i,el){$(el).removeClass("hide")})):errorResult($form,"Oops, there was a problem ;( <br><br>"+statusMessage.join("<br><br>")),toggleSubmitButton(btnSubmit,"on")},function(){errorResult($form),toggleSubmitButton(btnSubmit,"on")})}function toggleSubmitButton(btnSubmit,status){"off"==status?(btnSubmit.addClass("form-status-sending"),btnSubmit.text("Sending..."),btnSubmit.prop("disabled",!0)):(btnSubmit.removeClass("form-status-sending"),btnSubmit.text(btnSubmit.dataAttr("text")),btnSubmit.prop("disabled",!0))}function errorResult($form,message){message||(message="Oops, there was a problem ;("),$form.prepend('<div class="form-error">'+message+' <br><br>Email us at <a href="mailto:help@launchapp.io">help@launchapp.io</a> and we will add you manually.</div>'),ga("send","event","error","form",$form.find('input[name="email"]').val())}function validate_email(email){var re=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return re.test(email)}function validate_input($form){var inputs=$form.find(".form-control"),errors=$form.find(".form-error");errors.remove();var results=!0;return $.each(inputs,function(i,el){if($(el).removeClass("is-error"),$(el).hasClass("required")){var elError=null;if($(el).val()||(elError="Please provide a valid value."),"email"==$(el).attr("name")){var emailValid=validate_email($(el).val());emailValid||(elError="Please provide a valid email address.")}elError&&(results=!1,$(el).addClass("is-error"),$(el).before('<div class="form-error">'+elError+"</div>"))}}),results}function makePayload($form){var dataObject=$form.serializeArray(),data={};$.each(dataObject,function(i,el){data[el.name]=el.value});var payload={email:data.email,profile:{gender:data.gender,relationshipStatus:data.relationshipStatus,zip:data.zip,ageGroup:data.ageGroup,mailLists:[parseInt(data.listId)]}};return payload}$("body").dataAttr("contentVersion")&&ga("send","event","content","version",$("body").dataAttr("contentVersion")),$.each($("[data-trackCategory]"),function(i,el){$(el).click(function(event){trackEvent($(event.target))})});var ip=$(".registerZip").first().data("ip");ip.length>0&&$.getJSON("https://ipapi.co/"+ip+"/json/",function(data){return!!data&&void(data.postal?$.each($(".registerZip"),function(i,el){$(el).val(data.postal),$(el).parent().hide()}):$.each($(".registerZip"),function(i,el){$(el).set("value","0")}))});var formClass="registrationForm",forms=$("."+formClass+" form");forms.length>0&&$.each(forms,function(i,el){$(el).find(".formLoadingError").hide(),$(el).find(".formFields").attr("disabled",!1),$(el).find(".formFields").show(),$(el).find("button").attr("disabled",!1),$(el).submit(function(event){event&&event.preventDefault(),validate_input($(el))&&send($(el))})})})}),function(root,factory){"function"==typeof require?require(["stratus","jquery","https://www.youtube.com/player_api"],factory):factory(root.Stratus,root.$)}(this,function(Stratus,$){Stratus.DOM.ready(function(){function onPlayerReady(event){}function onPlayerStateChange(event){var state=player.getPlayerState(),playerTime=10*parseInt(player.getCurrentTime()/10);1==state&&(ga("send","event","videos","play","promo"),pauseFlag=!0),2==state&&pauseFlag&&(ga("send","event","videos","pause","promo"),ga("send","event","videos","pauseTime",playerTime),pauseFlag=!1),0==state&&ga("send","event","Videos","finished","promo")}if($("#launchVideo").length){var player=new window.YT.Player("launchVideo",{events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange}}),pauseFlag=!1;Stratus.DOM.unload(function(){var playerTime=10*parseInt(player.getCurrentTime()/10);ga("send","event","videos","bounceTime",playerTime)})}})});